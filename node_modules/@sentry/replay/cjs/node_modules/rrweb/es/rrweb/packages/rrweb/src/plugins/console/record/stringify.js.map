{"version":3,"file":"stringify.js","sources":["../../../../../../../../../../../../../../../node_modules/rrweb/es/rrweb/packages/rrweb/src/plugins/console/record/stringify.js"],"sourcesContent":["import { __values } from '../../../../ext/tslib/tslib.es6.js';\n\nfunction pathToSelector(node) {\n    if (!node || !node.outerHTML) {\n        return '';\n    }\n    var path = '';\n    while (node.parentElement) {\n        var name_1 = node.localName;\n        if (!name_1) {\n            break;\n        }\n        name_1 = name_1.toLowerCase();\n        var parent_1 = node.parentElement;\n        var domSiblings = [];\n        if (parent_1.children && parent_1.children.length > 0) {\n            for (var i = 0; i < parent_1.children.length; i++) {\n                var sibling = parent_1.children[i];\n                if (sibling.localName && sibling.localName.toLowerCase) {\n                    if (sibling.localName.toLowerCase() === name_1) {\n                        domSiblings.push(sibling);\n                    }\n                }\n            }\n        }\n        if (domSiblings.length > 1) {\n            name_1 += ':eq(' + domSiblings.indexOf(node) + ')';\n        }\n        path = name_1 + (path ? '>' + path : '');\n        node = parent_1;\n    }\n    return path;\n}\nfunction isObject(obj) {\n    return Object.prototype.toString.call(obj) === '[object Object]';\n}\nfunction isObjTooDeep(obj, limit) {\n    var e_1, _a;\n    if (limit === 0) {\n        return true;\n    }\n    var keys = Object.keys(obj);\n    try {\n        for (var keys_1 = __values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\n            var key = keys_1_1.value;\n            if (isObject(obj[key]) && isObjTooDeep(obj[key], limit - 1)) {\n                return true;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return false;\n}\nfunction stringify(obj, stringifyOptions) {\n    var options = {\n        numOfKeysLimit: 50,\n        depthOfLimit: 4,\n    };\n    Object.assign(options, stringifyOptions);\n    var stack = [];\n    var keys = [];\n    return JSON.stringify(obj, function (key, value) {\n        if (stack.length > 0) {\n            var thisPos = stack.indexOf(this);\n            ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\n            ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\n            if (~stack.indexOf(value)) {\n                if (stack[0] === value) {\n                    value = '[Circular ~]';\n                }\n                else {\n                    value =\n                        '[Circular ~.' +\n                            keys.slice(0, stack.indexOf(value)).join('.') +\n                            ']';\n                }\n            }\n        }\n        else {\n            stack.push(value);\n        }\n        if (value === null || value === undefined) {\n            return value;\n        }\n        if (shouldIgnore(value)) {\n            return toString(value);\n        }\n        if (value instanceof Event) {\n            var eventResult = {};\n            for (var eventKey in value) {\n                var eventValue = value[eventKey];\n                if (Array.isArray(eventValue)) {\n                    eventResult[eventKey] = pathToSelector(eventValue.length ? eventValue[0] : null);\n                }\n                else {\n                    eventResult[eventKey] = eventValue;\n                }\n            }\n            return eventResult;\n        }\n        else if (value instanceof Node) {\n            if (value instanceof HTMLElement) {\n                return value ? value.outerHTML : '';\n            }\n            return value.nodeName;\n        }\n        else if (value instanceof Error) {\n            return value.stack\n                ? value.stack + '\\nEnd of stack for Error object'\n                : value.name + ': ' + value.message;\n        }\n        return value;\n    });\n    function shouldIgnore(_obj) {\n        if (isObject(_obj) && Object.keys(_obj).length > options.numOfKeysLimit) {\n            return true;\n        }\n        if (typeof _obj === 'function') {\n            return true;\n        }\n        if (isObject(_obj) && isObjTooDeep(_obj, options.depthOfLimit)) {\n            return true;\n        }\n        return false;\n    }\n    function toString(_obj) {\n        var str = _obj.toString();\n        if (options.stringLengthLimit && str.length > options.stringLengthLimit) {\n            str = \"\".concat(str.slice(0, options.stringLengthLimit), \"...\");\n        }\n        return str;\n    }\n}\n\nexport { stringify };\n"],"names":["__values"],"mappings":"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"}