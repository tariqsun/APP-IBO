{"version":3,"file":"createRecordingData.js","sources":["../../../../src/util/createRecordingData.ts"],"sourcesContent":["import { ReplayRecordingData } from '@sentry/types';\n\nimport type { RecordedEvents } from '../types';\n\n/**\n * Create the recording data ready to be sent.\n */\nexport function createRecordingData({\n  events,\n  headers,\n}: {\n  events: RecordedEvents;\n  headers: Record<string, unknown>;\n}): ReplayRecordingData {\n  let payloadWithSequence;\n\n  // XXX: newline is needed to separate sequence id from events\n  const replayHeaders = `${JSON.stringify(headers)}\n`;\n\n  if (typeof events === 'string') {\n    payloadWithSequence = `${replayHeaders}${events}`;\n  } else {\n    const enc = new TextEncoder();\n    // XXX: newline is needed to separate sequence id from events\n    const sequence = enc.encode(replayHeaders);\n    // Merge the two Uint8Arrays\n    payloadWithSequence = new Uint8Array(sequence.length + events.length);\n    payloadWithSequence.set(sequence);\n    payloadWithSequence.set(events, sequence.length);\n  }\n\n  return payloadWithSequence;\n}\n"],"names":[],"mappings":"AAIA;AACA;AACA;AACA,SAAA,mBAAA,CAAA;AACA,EAAA,MAAA;AACA,EAAA,OAAA;AACA,CAAA;;AAGA,EAAA;AACA,EAAA,IAAA,mBAAA,CAAA;AACA;AACA;AACA,EAAA,MAAA,aAAA,GAAA,CAAA,EAAA,IAAA,CAAA,SAAA,CAAA,OAAA,CAAA,CAAA;AACA,CAAA,CAAA;AACA;AACA,EAAA,IAAA,OAAA,MAAA,KAAA,QAAA,EAAA;AACA,IAAA,mBAAA,GAAA,CAAA,EAAA,aAAA,CAAA,EAAA,MAAA,CAAA,CAAA,CAAA;AACA,GAAA,MAAA;AACA,IAAA,MAAA,GAAA,GAAA,IAAA,WAAA,EAAA,CAAA;AACA;AACA,IAAA,MAAA,QAAA,GAAA,GAAA,CAAA,MAAA,CAAA,aAAA,CAAA,CAAA;AACA;AACA,IAAA,mBAAA,GAAA,IAAA,UAAA,CAAA,QAAA,CAAA,MAAA,GAAA,MAAA,CAAA,MAAA,CAAA,CAAA;AACA,IAAA,mBAAA,CAAA,GAAA,CAAA,QAAA,CAAA,CAAA;AACA,IAAA,mBAAA,CAAA,GAAA,CAAA,MAAA,EAAA,QAAA,CAAA,MAAA,CAAA,CAAA;AACA,GAAA;AACA;AACA,EAAA,OAAA,mBAAA,CAAA;AACA;;;;"}